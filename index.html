<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SMARTHOME</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <style>
    body {
      min-height: 100vh;
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      text-align: center;
      background: white;
      background-size: 300% 300%;
      background: linear-gradient(270deg, #e0f2fe, #fef9c3, #dcfce7);
      animation: bgMove 12s ease infinite;
    }
    @keyframes bgMove {
      0%   { background-position: 0% 50%; }
      50%  { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .dashboard {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 100px;
      flex-wrap: wrap;
    }
    .title {
      margin-top: 30px;
      font-size: 48px;
      font-weight: 800;
      letter-spacing: 2px;

      background: #020617;
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 25px rgba(56,189,248,0.5);
      }
    .box {
      width: 300px;
      height: 300px;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.55);
      backdrop-filter: blur(10px);
      color: rgb(3, 3, 3);
      box-shadow: 0 25px 60px rgba(0,0,0,0.2);
      transition: transform 0.3s;
      position: relative;
    }
    .box:hover {
      transform: translateY(-10px) scale(1.05);
      box-shadow: 0 25px 60px rgba(0,0,0,0.7);
    }
    .box-title{
      font-size: 25px;
      margin-bottom: 30px;
    }
    .sensor{
      font-size: 18px;
      font-weight: 600;
      width: 250px;
      height: 60px;
      background: #e5e7eb;
      color: #111827;
      border-radius: 14px;
      position: absolute;
      left: 25px;
      display: flex;
      align-items: center;
      justify-content: center;

    }
    #tempbox { top: 90px; }
    #humbox  { top: 160px; }
    
    #lightsensor { top: 90px; }
    #ledauto_text  { top: 160px;}

    #rainsensor {top: 90px;}
    #cayphoi  { top: 160px;}
    

    .light-sang{
      background: linear-gradient(135deg, #fff7a5, #ffe066);
      color: #92400e;
      font-weight: 700;
      box-shadow:
        0 0 10px rgba(255, 215, 0, 0.8),
        0 0 20px rgba(255, 215, 0, 0.6),
        0 0 35px rgba(255, 215, 0, 0.4);
      animation: glowSun 1.5s ease-in-out infinite alternate;
    }


    @keyframes glowSun{
      from{
        box-shadow:
          0 0 8px rgba(255, 215, 0, 0.6),
          0 0 18px rgba(255, 215, 0, 0.4);
      }
      to{
        box-shadow:
          0 0 15px rgba(255, 215, 0, 1),
          0 0 30px rgba(255, 215, 0, 0.8),
          0 0 45px rgba(255, 215, 0, 0.6);
      }
    }
    .light-toi{
        background: linear-gradient(135deg, #6d28d9, #312e81);
        color: #ede9fe;
        font-weight: 700;
        box-shadow:
          0 0 10px rgba(168, 85, 247, 0.8),
          0 0 20px rgba(139, 92, 246, 0.6),
          0 0 35px rgba(124, 58, 237, 0.4);
        animation: glowMoon 1.5s ease-in-out infinite alternate;
      }

      /* hi·ªáu ·ª©ng ph√°t s√°ng t√≠m */
      @keyframes glowMoon{
        from{
          box-shadow:
            0 0 8px rgba(168, 85, 247, 0.6),
            0 0 18px rgba(139, 92, 246, 0.4);
        }
        to{
          box-shadow:
            0 0 15px rgba(168, 85, 247, 1),
            0 0 30px rgba(139, 92, 246, 0.8),
            0 0 45px rgba(124, 58, 237, 0.6);
        }
      }
      .switch-box {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: auto;  
        width: 220px;
        height: 30px;
        padding: 15px;
        border-radius: 16px;
        background: #e5e7eb;
      }

      .switch {
        position: relative;
        width: 60px;
        height: 32px;
        display: inline-block;
      }

      .switch input {
        display: none;
      }

      .slider {
        position: absolute;
        inset: 0;
        background: #374151;
        border-radius: 32px;
        cursor: pointer;
        transition: 0.4s;
      }

      .slider::before {
        content: "";
        position: absolute;
        width: 24px;
        height: 24px;
        left: 4px;
        bottom: 4px;
        background: white;
        border-radius: 50%;
        transition: 0.4s;
      }

      input:checked + .slider {
        background: linear-gradient(135deg, #1de459, #0f850b);
        box-shadow: 0 0 20px rgba(8, 145, 31, 0.8);
      }

      input:checked + .slider::before {
        transform: translateX(28px);
      }

      .safe {
        background: #e5e7eb;
        color: #065f46;
      }

      @media (max-width: 768px){
        .title {
            font-size: 32px;
            margin-top: 20px;
        }

        .dashboard {
            flex-direction: column;   /* X·∫øp d·ªçc */
            align-items: center;
            margin-top: 40px;
            gap: 25px;
        }

        .box {
            width: 90%;               /* Full ngang m√†n h√¨nh */
            max-width: 360px;
            height: 280px;
        }
        .box:hover {
          transform: none;
          box-shadow: 0 25px 60px rgba(0,0,0,0.2);
        }

        .sensor {
            width: calc(100% - 40px);
            left: 20px;
            font-size: 16px;
        }
      }
  </style>
</head>
<body>
  <h1 class="title">
    <i class="fa-solid fa-house-signal"></i> Smart Home
  </h1>
  <div class="dashboard">
    <div id="DHT11" class="box">
      <h4 class="box-title">‚õÖÔ∏è Nhi·ªát ƒë·ªô</h4>
      <div id = "tempbox" class = "sensor">
        üå°Ô∏è Nhi·ªát ƒë·ªô: <span id="temp">--</span> ¬∞C
      </div>
      <div id = "humbox" class = "sensor">
        üí¶ ƒê·ªô ·∫©m: <span id="hum">--</span> %
      </div>
    </div>
    <div id ="Cambienanhsang" class="box">
      <h4 class="box-title">Ng√†yüåû/ƒê√™müåö</h4>
      <div id="lightsensor" class="sensor sensor light-sang" >
        üåû S√°ng
      </div> 
      <div id="ledauto_text" class="sensor">
        üí° ƒê√àN T·∫ÆT
      </div>
    </div>
    
    <div id ="Cambienmua" class="box">
      <h4 class="box-title">M∆∞aüåßÔ∏è/N·∫Øng‚òÄÔ∏è</h4>
      <div id="rainsensor" class="sensor mua" >
        ‚òÄÔ∏è N·∫Øng
      </div> 
      <div id="cayphoi" class="sensor">
        üß∫ C·∫§T ƒê·ªí
      </div>
    </div>

    <div id="LED1" class="box">
      <h4 class="box-title">üí°ƒê√àN PH√íNG</h4>
      <div class="switch-box">
          <span id="led-text">ƒê√àN T·∫ÆT</span>
          <label class="switch">
            <input type="checkbox" onchange="toggleLed(this)">
            <span class="slider"></span>
          </label>
      </div>
    </div>
    



  </div>
  
 <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
  // üîπ C·∫•u h√¨nh Firebase (L·∫§Y T·ª™ PROJECT C·ª¶A B·∫†N)
  const firebaseConfig = {
    databaseURL: "https://smart-home-esp32-75ece-default-rtdb.asia-southeast1.firebasedatabase.app"
  };

  // üîπ Kh·ªüi t·∫°o Firebase
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  // üîπ L·∫•y d·ªØ li·ªáu realtime
  const sensorRef = database.ref("sensor");

  sensorRef.on("value", (snapshot) => {
    const data = snapshot.val();
    if (!data) return;

    // Nhi·ªát ƒë·ªô & ƒë·ªô ·∫©m
    document.getElementById("temp").innerHTML = data.temp;
    document.getElementById("hum").innerHTML  = data.hum;

    const lightSensor = document.getElementById("lightsensor");
    const lightText   = document.getElementById("ledauto_text");

    console.log("Light =", data.light);

    if (data.light == 1) {        // T·ªêI
      lightSensor.textContent = "üåö T·ªëi";
      lightSensor.classList.remove("light-sang");
      lightSensor.classList.add("light-toi");
      lightText.textContent = "üí° ƒê√àN B·∫¨T";
    } else {                      // S√ÅNG
      lightSensor.textContent = "üåû S√°ng";
      lightSensor.classList.remove("light-toi");
      lightSensor.classList.add("light-sang");
      lightText.textContent = "üí° ƒê√àN T·∫ÆT";
    }
  });
</script>
</body>
</html>

